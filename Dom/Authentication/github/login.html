<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #container{
            margin-top: 20px;
            display: flex;

        }
        form{
            width: 10%;
        }
    </style>
</head>
<body>
    
    <div id="container">
        <div id="login_form">
            <h1>log in</h1>
            <form action="">
                <input type="text" name="" id="login_username" placeholder="usernaem">
                <input type="text" name="" id="login_password" placeholder="Password">

            </form>
            <button onclick="login()">
             login
            </button>

        </div>

    </div>

    <a href="index.html"><button>Back to Home</button></a>
</body>
</html>

<script>


async function login() {

let login_data = {
    username: document.getElementById("login_username").value,
    password: document.getElementById("login_password").value,
};

login_data = JSON.stringify(login_data);

let login_api = "https://masai-api-mocker.herokuapp.com/auth/login";

let response = await fetch(login_api, {
    method: "POST",
    body: login_data,
    headers: {
            "content-Type": "application/json",
        },
});

let data = await response.json();
console.log(data);



let username = document.getElementById("login_username").value;

getprofile(username, data.token);

} 

async function getprofile(username, token) {

let api = `https://masai-api-mocker.herokuapp.com/user/${username}`;

let response = await fetch(api, {
  headers: {
            "content-Type": "application/json",

            Authorization: `Bearer ${token}`,
    },
});

let data = await response.json();
console.log(data);
}



</script>